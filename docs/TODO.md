# Candy AI 项目 TODO 清单

## 用户注册与第三方登录功能

### 📋 功能需求分析

基于您提供的注册页面图片，我们需要实现以下功能：

#### 1. 传统注册功能
- [ ] **邮箱注册接口** (`/api/auth/register`)
  - 邮箱验证
  - 密码强度验证（最少6位）
  - 验证码验证
  - 用户信息保存

#### 2. 第三方登录功能
- [ ] **Google登录接口** (`/api/auth/google`)
  - Google OAuth 2.0 集成
  - 用户信息获取和同步
  - 自动注册/登录逻辑

- [ ] **Discord登录接口** (`/api/auth/discord`)
  - Discord OAuth 2.0 集成
  - 用户信息获取和同步
  - 自动注册/登录逻辑

- [ ] **第三方登录接口** (`/api/auth/third-party`)
  - 通用第三方登录处理
  - 支持多种第三方平台扩展

#### 3. 用户管理功能
- [ ] **用户信息修改接口** (`/api/user/profile`)
  - 基本信息修改
  - 头像上传
  - 密码修改

- [ ] **用户信息查询接口** (`/api/user/info`)
  - 获取当前用户信息
  - 获取用户详细信息

#### 4. 数据库扩展
- [x] **扩展用户表字段** ✅ 已完成 (2025-08-01)
  - 添加第三方登录相关字段
  - 添加用户注册来源字段
  - 添加邮箱验证状态字段

- [x] **创建第三方登录关联表** ✅ 已完成 (2025-08-01)
  - 存储第三方平台用户ID
  - 关联本地用户ID

- [x] **创建邮箱验证表** ✅ 已完成 (2025-08-01)
  - 存储邮箱验证码信息
  - 支持验证码过期管理

#### 5. 配置管理
- [ ] **第三方登录配置**
  - Google OAuth 配置
  - Discord OAuth 配置
  - 环境变量配置

- [ ] **邮件服务配置**
  - 邮箱验证邮件发送
  - 邮件模板配置

#### 6. 安全功能
- [ ] **邮箱验证功能**
  - 邮箱验证码发送
  - 邮箱验证状态管理

- [ ] **密码重置功能**
  - 忘记密码邮件发送
  - 密码重置流程

#### 7. 前端集成
- [ ] **注册页面集成**
  - 与现有注册页面对接
  - 错误处理和提示

- [ ] **第三方登录按钮集成**
  - Google登录按钮
  - Discord登录按钮
  - 登录状态管理

### 📋 已完成的基础工作

#### 实体类和DTO创建 ✅ 已完成 (2025-08-01)
- [x] **SysUserOauth实体类** - 第三方登录关联实体
- [x] **SysEmailVerify实体类** - 邮箱验证码实体  
- [x] **EmailRegisterBody DTO** - 邮箱注册请求体
- [x] **OAuthLoginBody DTO** - 第三方登录请求体

### 🔧 技术实现要点

#### 后端技术栈
- Spring Boot 3.3.5
- Spring Security + JWT
- MyBatis Plus
- Redis (验证码缓存)
- MySQL 8.0+

#### 第三方登录SDK
- Google OAuth 2.0 Client
- Discord OAuth 2.0 Client
- Spring Security OAuth2

#### 邮件服务
- Spring Boot Mail
- 邮件模板引擎

### 📝 开发优先级

#### 第一阶段：基础注册功能
1. 扩展用户表结构
2. 实现邮箱注册接口
3. 实现邮箱验证功能
4. 完善用户信息管理接口

#### 第二阶段：第三方登录
1. 配置第三方登录SDK
2. 实现Google登录
3. 实现Discord登录
4. 完善第三方登录关联

#### 第三阶段：安全与优化
1. 密码重置功能
2. 安全配置优化
3. 前端集成测试
4. 性能优化

### 🎯 验收标准

- [ ] 用户可以通过邮箱注册账号
- [ ] 用户可以通过Google登录
- [ ] 用户可以通过Discord登录
- [ ] 用户信息可以正常修改
- [ ] 邮箱验证功能正常工作
- [ ] 第三方登录用户信息正确关联
- [ ] 前端页面正常显示和交互
- [ ] 安全验证机制完善

### 📊 开发状态跟踪

#### 第一阶段：基础架构 ✅ 已完成 (2025-08-01)
- [x] 数据库结构扩展
- [x] 实体类和DTO创建
- [x] 系统配置添加

#### 第二阶段：核心功能 🔄 进行中
- [ ] 邮箱注册接口实现
- [ ] 邮箱验证功能实现
- [ ] 用户信息管理接口

#### 第三阶段：第三方登录 🔄 待开始
- [ ] Google OAuth集成
- [ ] Discord OAuth集成
- [ ] 第三方登录关联逻辑

#### 第四阶段：前端集成 🔄 待开始
- [ ] 注册页面集成
- [ ] 第三方登录按钮集成
- [ ] 用户界面优化

#### 第五阶段：测试验证 🔄 待开始
- [ ] 功能测试
- [ ] 安全测试
- [ ] 性能测试

---

**最后更新**: 2025-08-01
**负责人**: Candy AI Team
**状态**: 进行中 - 第一阶段完成，开始第二阶段 